---
created: 2024-06-21T17:55:00 (UTC +08:00)
tags: [git 子模块]
source: https://blog.csdn.net/huanglu0314/article/details/131157588
author:
---

# Git 子模块的使用

---

在 Git 中，子模块是一种将一个 Git 仓库作为另一个 Git 仓库的子目录进行管理的方法。使用子模块可以将一个仓库嵌套到另一个仓库中，这对于管理依赖关系和共享代码非常有用。

### 什么是子模块？

子模块是一个独立的 Git 仓库，它可以被嵌套在另一个 Git 仓库中。这种嵌套关系允许你在一个项目中使用其他项目，而不需要将它们的完整副本直接包含在项目中。

子模块的工作原理是在父仓库中保存子仓库的引用，这个引用包含子仓库的地址和特定的提交。当你克隆父仓库时，子模块的内容并不会自动下载，而是需要显式地初始化和更新子模块。

### 如何添加子模块？

要将一个子模块添加到你的项目中，你需要使用 `git submodule add` 命令。下面是添加子模块的步骤：

1.  找到你想要添加为子模块的仓库的远程 URL。
2.  在你的父仓库中打开命令行或终端。
3.  导航到父仓库的根目录。
4.  运行以下命令来添加子模块：

    ```bash
    git submodule add <仓库URL> <子模块路径>
    ```

    这会将子模块克隆到指定的子模块路径，并将其添加为父仓库的一个条目。

5.  提交父仓库的变更，包括对子模块的添加：

    ```bash
    git commit -m "添加子模块：子模块名称"
    ```

### 如何初始化和更新子模块？

在克隆父仓库或在其他人更新了子模块之后，你需要初始化和更新子模块。以下是初始化和更新子模块的步骤：

1.  在父仓库的根目录打开命令行或终端。
2.  运行以下命令来初始化和更新子模块：

    ```bash
    git submodule init
    git submodule update
    ```

    初始化命令会将子模块的配置文件拉取到你的本地仓库中，并将子模块的目录创建为一个空目录。更新命令会将子模块的内容克隆到子模块目录中。

3.  （可选）如果你只想更新子模块到最新的提交，可以运行以下命令：

    ```bash
    git submodule update --remote
    ```

这会将子模块更新到它的最新提交。

4.  提交父仓库的变更，包括对子模块的初始化和更新：

```bash
git commit -m "初始化和更新子模块"
```

### 如何管理子模块的变更？

子模块作为独立的仓库存在，所以你可以在子模块中进行提交、分支管理等操作。但是，在父仓库中，子模块只会被视为一个固定的提交，除非你显式地更新子模块。

如果你需要在父仓库中使用子模块的最新变更，你需要在子模块中进行提交并将父仓库更新到包含这些提交的版本。下面是更新子模块的步骤：

1.  在子模块的目录中打开命令行或终端。
2.  进行你需要的修改，并进行提交和推送。

    ```bash
    cd <子模块路径>
    #进行修改
    git add .
    git commit -m "子模块变更"
    git push
    ```

3.  在父仓库的根目录打开命令行或终端。
4.  更新子模块到最新的提交。

```bash
git submodule update --remote
```

5.提交父仓库的变更，包括对子模块的更新：

```bash
git commit -m "更新子模块到最新提交"
```

### 如何移除子模块？

如果你不再需要使用子模块，你可以将其从父仓库中移除。以下是移除子模块的步骤：

1.  在父仓库的根目录打开命令行或终端。
2.  运行以下命令来移除子模块：

    ```bash
     git submodule deinit <子模块路径>
     git rm <子模块路径>
    ```

    第一个命令会将子模块从父仓库的配置中移除，第二个命令会从父仓库中删除子模块的目录和文件。

3.  提交父仓库的变更，包括对子模块的移除：

    ```bash
    git commit -m "移除子模块"
    ```

### 小结

子模块是一个强大的工具，用于在 Git 仓库中管理其他仓库的依赖关系和共享代码。通过使用子模块，你可以将项目分解成更小的、可重用的部分，并且能够更好地跟踪和管理这些部分的变更。希望本文对你理解和使用 Git 的子模块提供了帮助。
