---
created: 2023-12-06T21:07:39 (UTC +08:00)
tags: [微信聊天记录, 聊天记录导出, 词云图]
source: https://zhuanlan.zhihu.com/p/554825864
author:
---

# 傻瓜教程：使用小米系列手机提取微信聊天记录并制作词云图 - 知乎

> ## Excerpt
>
> 微信占据着手机许多存储空间，它会将与他人的聊天记录全部存储在本地空间中，这也给我们提取这些聊天记录提供了一种方式。但是要想真的提取出它们，却又有不少坑。前段时间探索了一些网上教程，因为我也不是程序员…

---

微信占据着手机许多存储空间，它会将与他人的聊天记录全部存储在本地空间中，这也给我们提取这些聊天记录提供了一种方式。但是要想真的提取出它们，却又有不少坑。前段时间探索了一些网上教程，因为我也不是程序员，不懂那些程序算法，所以下面都是非编程的傻瓜教程，希望对编程小白们有所帮助。

## 1\. 从小米手机中提取出微信聊天记录

虽然微信聊天记录是存储在手机本地空间中，但是找到并复制提取出该文件需要开发者权限，这个方法似乎有些难度。所以可以另辟蹊径，在小米手机中，我们可以通过备份聊天记录的方式提取它们。

### （1）备份

打开“设置”-“我的设备”-“备份与恢复”-“手机备份恢复”-“只选择微信”，点击立即备份。

![](https://pic3.zhimg.com/v2-70ad5d766cd998c877e350738ab201aa_b.jpg)

### （2）找到备份后的文件

备份完毕后，将手机与电脑连接，找到下面这个文件：<微信(com.tencent.mm).bak>，该文件中存储了本地空间中与微信有关的文档，其中就包括聊天记录文档。

![](https://pic4.zhimg.com/v2-e403ca46ef470e6dc90b8ebd41f942c3_b.png)

### （3）解压备份文件

使用 7-zip 解压缩软件对该文件进行解压（不要用什么 winRAR，会出现问题，用 7-zip 是没问题的），这个解压软件还挺好用的，也可以解压别的文件，这是它的下载地址。

### （4）找到存储微信聊天记录的数据库文档

解压完成后，在文件中找到下面这个数据库文档：<EnMicroMsg.db>，这就是微信聊天记录文档。

![](https://pic3.zhimg.com/v2-c57c6d7d987b08cf5098c986e558d68e_b.jpg)

### （5）打开数据库文档

由于微信聊天记录数据库文档是加密存储的，这里需要使用<sqlcipher.exe>应用程序打开该文档，进入软件选择打开文档，找到并打开数据库文档。大家可以通过如下网盘链接下载该程序。

### （6）找到数据库密码

该数据库密码需要 MD5 进行加密，可以通过下面这个网站实现。

具体需要加密的内容是 IMEI 与 uin 的组合（我的手机是双卡，两个 IMEI 试了都不行，最后 IMEI 用的是“1234567890ABCDEF”，大家如果也不能成功解密的话，不妨试试这组数）。

IMEI 是移动设备识别码，在“设置”-“我的设备”-“全部参数”-“状态信息”中可以找到。

![](https://pic1.zhimg.com/v2-52c261a8e7ef43be9172e4be16501198_b.jpg)

uin 是微信用户信息识别码，获取方式如下：

① 打开浏览器（我这里使用的是 QQ 浏览器，其他浏览器没有尝试过），搜索打开微信网页版（网页版微信打不开的，可以打开微信文件传输助手网页版）；

② 将该抓包工具链接复制到网址栏，按回车键前进访问（chrome://net-internals/#events）；

③ 在网页版微信中随便发一条消息；

④ 在抓包工具中找到 uin，如下图所示。

![](https://pic3.zhimg.com/v2-9f0954b3c0ec599ce5a71d3494b367d2_b.jpg)

这样我们就可以在 MD5 中加密（IMEI+uin），32 位的前 7 位就是密码。

如果成功解密，就可以看到下面这个界面啦。

![](https://pic2.zhimg.com/v2-9fecb8e15aaf1dc070106e3586cc0e95_b.jpg)

### （7）找到并导出存储聊天信息的表格

上图中有很多表格，点击菜单栏的“File”-“Export-Table as CSV file”，选择 message 表格，导出。

### （8）打开聊天信息表格

新建一个 excel 表格，点击“数据”-“来自文本”，导入.csv 文件。

---

获得了聊天记录文档，接下来就可以任由自己编辑啦。由于中文与英文词的组成方式不同，在真正制作词云图之前，还需要对中文句子进行分词。

## 2\. 使用 Python 对句子进行分词

没有使用过 python 的朋友们，需要先下载 python，以及一个 python 的 IDE-pycharm。

下载完毕后，打开 pycharm，依次点击“File”-“Settings”，在 python interpreter 中点击“+”号，搜索 jieba 与 wordcloud 工具包进行下载。

![](https://pic4.zhimg.com/v2-302a02f1d200d74d62d04c2def2b351b_b.jpg)

下载完毕，可以在编辑器中运行如下代码，即可完成最简易的分词与词云图制作，关于这两个工具包还有许多可以改变的参数，这里不再赘述，大家可以去专门搜索它们，网上有很多资料。

```python
import jieba
import wordcloud as wc
f = open("C:\\Users/86156/Desktop/python/file.txt","r",encoding='utf-8') #需要自行修改路径，file.txt为聊天记录文档
txt = f.read()
f.close()
ls = jieba.cut(txt)
txt = " ".join(ls)
w = wc.WordCloud(font_path="msyh.ttc",width=1000,height=700,background_color="white",)
w.generate(txt)
w.to_file("词云图.png")
```

## 3\. 使用 Matlab 制作云图

分词的工具包，一般需要采用 python 的 jieba 包。制作云图，除了 python 的 wordcloud 包，还可以使用 matlab 的 wordcloud 函数，需要在 matlab 2017b 以后的版本上运行。在 matlab 官网上有关于该函数的简介与案例，大家想要用 matlab 制作的话，可以去搜索看看。

---

上面的教程只是一个编程小白几天的探索，如果大家有什么更好的办法，欢迎多多交流~
